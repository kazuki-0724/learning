# Repository to Markdown Converter

※このREADMEはGeminiによる自動生成です。
GitリポジトリのZIPファイルをダウンロードし、その中のソースコード全体をAI（大規模言語モデル）への入力に最適化された単一または分割されたMarkdownファイルに変換するNode.js製CLIツールです。

## 概要

このツールは、リモートリポジトリのソースコードを分析・レビューするために、手動でファイルを一つずつコピー＆ペーストする手間を完全に排除します。
`args.txt` にリポジトリのZIPダウンロードURLを記述するだけで、以下の処理を自動的に実行します。

1.  URLからリポジトリのZIPファイルをダウンロードします。
2.  ZIPファイルを解凍します。
3.  `node_modules` や `.git` などの不要なディレクトリや設定ファイルを除外し、ソースコードのみを抽出します。
4.  すべてのソースコードを、ファイルパス付きのMarkdownコードブロック形式に変換し、一つの巨大なMarkdownファイルにまとめます。
5.  生成されたMarkdownファイルが巨大な場合、AIのコンテキストウィンドウサイズを考慮して、適切なサイズの複数のパートファイルに自動で分割します。

## 特徴

*   **リポジトリの一括処理**: 複数のリポジトリURLを一度に処理できます。
*   **プライベートリポジトリ対応**: `args.txt` にアクセストークンを指定することで、プライベートリポジトリからもダウンロード可能です。
*   **インテリジェントなフィルタリング**: 一般的な開発で不要とされるディレクトリ（`node_modules`, `dist`など）やファイル（`package-lock.json`など）を自動で除外します。
*   **AIへの入力に最適化**:
    *   プロジェクト全体の構造を把握しやすいように、すべてのコードを1つのファイルに集約します。
    *   巨大なプロジェクトでも扱えるように、指定したチャンクサイズ（デフォルト: 256KB）でMarkdownファイルを自動分割します。
*   **対話的な実行確認**: 処理を開始する前に、対象URLをリスト表示し、実行の可否をユーザーに確認します。
*   **クリーンな実行環境**: 実行時に前回のダウンロードキャッシュや出力ファイルを自動でクリーンアップします。

## 必要なもの

*   [Node.js](https://nodejs.org/)
*   npm (Node.jsに同梱)

## インストール

1.  このプロジェクトをクローンまたはダウンロードします。

+2.  プロジェクトのディレクトリに移動し、必要なnpmパッケージをインストールします。
    ```bash
    npm install
    ```
    これにより、`axios`, `adm-zip`, `prompts` がインストールされます。


## 使い方

1.  プロジェクトのルートディレクトリに `args.txt` という名前のファイルを作成します。

2.  `args.txt` に、処理したいリポジトリのZIPダウンロードURLを `url=` の形式で記述します。複数指定も可能です。プライベートリポジトリの場合は `token=` でアクセストークンを指定します。

    **`args.txt` の記述例:**
    ```text
    
    # GitLabプライベートリポジトリの例
    url=https://gitlab.com/api/v4/projects/12345/repository/archive.zip?sha=main
    token=your_private_access_token
    ```

3.  コマンドラインで以下のコマンドを実行します。
    ```bash
    node code_markdowned.js
    ```

4.  スクリプトが `args.txt` を読み込み、処理対象のURL一覧を表示します。実行を確認すると、処理が開始されます。

5.  処理が完了すると、`markdown_outputs` ディレクトリ内にリポジトリごとのフォルダが作成され、その中にMarkdownファイル（`.md`）が生成されます。
    *   `markdown_outputs/<リポジトリ名>/<リポジトリ名>.md` (全ソースコードを結合したファイル)
    *   `markdown_outputs/<リポジトリ名>/<リポジトリ名>_part_1.md` (分割されたファイル1)
    *   `markdown_outputs/<リポジトリ名>/<リポジトリ名>_part_2.md` (分割されたファイル2)
    *   ...

## カスタマイズ

スクリプト上部の定数を変更することで、挙動をカスタマイズできます。

*   `BASE_DOWNLOAD_DIR`: ZIPファイルの解凍先ディレクトリ。
*   `BASE_MARKDOWN_OUTPUT_DIR`: Markdownファイルの出力先ディレクトリ。
*   `MAX_CHUNK_SIZE_BYTES`: Markdown分割時の最大ファイルサイズ（バイト単位）。
*   `SOURCE_EXTENSIONS`: 収集対象とするソースコードの拡張子リスト。
*   `EXCLUDE_DIRS`: 除外するディレクトリ名のリスト。
*   `EXCLUDE_FILES`: 除外するファイル名のリスト。
